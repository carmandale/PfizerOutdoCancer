// successful view

🔄 === PHASE TRANSITION START ===
├─ From: loading
├─ To: intro
├─ Current Tracking State: initialized
├─ Has Hand Tracking: false
└─ Will Need Hand Tracking: true
🔄 Phase transition: loading -> intro
🔍 isTransitioning: false
🔍 immersiveSpaceState: closed

=== Preparing ADC for intro and playing ===
🎯 Loading ADC template...
AssetLoadingManager: loadAsset(withName: adc, category: adc)
✅ ADC entity loaded, applying colors...

🎯 Setting up ADC Template
- Template entity: Root
- Antibody Color: -1
- Linker Color: -1
- Payload Color: -1
✅ ADC template stored in gameState
✅ ADC template configured with colors
✅ ADC template passed to lab state

=== Tracking State [Start Tracking Request] ===
├─ Tracking Enabled: false
├─ Hand Tracking Enabled: false
└─ Current Provider State: initialized
ar_world_tracking_provider_query_device_anchor_at_timestamp <0x302ee4140>: The device_anchor can only be queried when the world tracking provider is running.
⚠️ No device anchor available

🌐 Provider States
├─ World Provider: initialized
├─ Hand Provider: initialized
└─ Stopped with Error: false

🖐️ Configuring Tracking Session
├─ World Tracking: Enabled
├─ Hand Tracking: Enabled
├─ Provider State: initialized
└─ Previous Tracking: Inactive
🎯 Managing windows for phase: intro
📊 Before state update - nav window open: false
📊 Window states after update:
  Main: true
  Debug: false
  Library: false
  Builder: false
  Phases:
    AppPhase: intro
    ScenePhase: active
    LoadingPhase: completed
🎯 PositioningSystem 01F8009C-4016-4CC3-B3A5-D723C60E6E98 initializing...
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context

=== IntroView Appeared ===
openImmersiveSpace result for intro: opened
cannot add handler to 0 from 1 - dropping

=== Processing Hand Updates ===
├─ Should Process Hand Tracking: true
└─ Hand Provider State: paused
🖐️ Starting hand tracking updates

=== Setting up IntroView ===

=== hasBuiltSDC = false ===
🔄 Starting new intro session: tracking states reset
📱 IntroViewModel: Setting up root

✅ Root Setup Complete
├─ Root Entity: IntroRoot
├─ Position: SIMD3<Float>(0.0, -1.5, -1.0)
└─ Positioning: Ready for explicit updates
✅ Added root to content
📱 IntroView: Starting environment setup
📱 IntroViewModel: Starting environment setup
📱 IntroViewModel: Attempting to load intro environment
AssetLoadingManager: loadAsset(withName: intro_environment, category: introEnvironment)
✅ IntroViewModel: Successfully loaded intro environment
✅ Environment setup complete
📱 IntroViewModel: Setting up individual entities
🔍 Found skyDome: SkySphere
✅ Set skyDome opacity to 0
📱 IntroViewModel: Starting portal setup
📱 Starting lab environment assembly
✅ Using cached assembled lab
✅ IntroViewModel: Successfully loaded assembled laboratory environment
✅ IntroViewModel: Created portal
✅ IntroViewModel: Portal setup complete
✅ IntroViewModel: Environment setup complete
✅ Environment setup complete
📱 IntroView: Found SwiftUI attachments
🎯 Found ADCBuilderAttachment target
🎯 Found AttackCancerAttachment target
🔍 Provider State Verification
├─ Expected State: Running
├─ World Provider: ✅ [running]
├─ Hand Tracking Needed: true
└─ Hand Provider: ✅ [running]

=== Tracking State [Post-Start] ===
├─ Tracking Enabled: true
├─ Hand Tracking Enabled: true
└─ Current Provider State: initialized

📍 Device Anchor Info
├─ Head Transform: simd_float4x4([[0.9991905, 0.005015661, -0.03991656, 0.0], [-0.0010813525, 0.99518764, 0.09798114, 0.0], [0.040215842, -0.097858645, 0.9943875, 0.0], [-0.00095017225, 1.2146146, 0.0046529025, 0.99999994]])
├─ Position X: -0.00095017225
├─ Position Y: 1.2146146
└─ Position Z: 0.0046529025

🌐 Provider States
├─ World Provider: running
├─ Hand Provider: running
└─ Stopped with Error: false
🔍 Provider State Verification
├─ Expected State: Running
├─ World Provider: ✅ [running]
├─ Hand Tracking Needed: true
└─ Hand Provider: ✅ [running]
✅ Tracking started successfully on attempt 1
✅ Phase transition completed: intro
✅ Transition to .intro completed
Cannot find a BindPoint for any bind path: "", "", "", "", ""

🔄 Provider State Change
├─ Provider: World Tracking
├─ From: initialized
├─ To: running
├─ Error: none
└─ Current Phase: intro

🔄 Provider State Change
├─ Provider: Hand Tracking
├─ From: initialized
├─ To: running
├─ Error: none
└─ Current Phase: intro

=== Tracking State [Provider State Change [running]] ===
├─ Tracking Enabled: true
├─ Hand Tracking Enabled: true
└─ Current Provider State: running

📍 Device Anchor Info
├─ Head Transform: simd_float4x4([[0.99918115, 0.004965525, -0.04015737, 0.0], [-0.00094514893, 0.99503493, 0.09952201, 0.0], [0.040452156, -0.09940259, 0.9942247, 0.0], [-0.0009409487, 1.2147537, 0.0049434304, 1.0]])
├─ Position X: -0.0009409487
├─ Position Y: 1.2147537
└─ Position Z: 0.0049434304

🌐 Provider States
├─ World Provider: running
├─ Hand Provider: running
└─ Stopped with Error: false
✅ Providers running

=== Start Button Pressed ===
Current Phase: intro
isReadyForInteraction: true
Setting shouldUpdateHeadPosition = true

🎯 Head Position Update Triggered
├─ shouldUpdate: true
├─ isReadyForHeadTracking: true
├─ isPositioningInProgress: false
├─ Current Phase: intro
├─ Tracking State: running
└─ Has Device Anchor: true

🎯 Starting Head Position Update
├─ Current Position: SIMD3<Float>(0.0, -1.5, -1.0)
├─ Tracking State: running
├─ isPositioningInProgress: false
└─ isPositioningComplete: false

🔄 Starting position update for entity 'IntroRoot'
├─ Current Position: SIMD3<Float>(0.0, -1.5, -1.0)
├─ Animated: ✅
└─ Duration: 0.5s

📍 Positioning entity 'IntroRoot'
├─ From: SIMD3<Float>(0.0, -1.5, -1.0)
├─ To: SIMD3<Float>(0.00087574124, -0.29077828, -0.9958763)
├─ Offsets: [0.0, -1.5, -1.0]
├─ Distance: 1.8027756m
└─ Method: Animated (0.5s)

✨ Position update complete for 'IntroRoot'
├─ Final Position: SIMD3<Float>(0.0, -1.5, -1.0)
└─ Status: Success

✨ Position update complete for 'IntroRoot'
├─ Final Position: SIMD3<Float>(0.00087491586, -0.29191792, -0.9958802)
└─ Status: Success
Failed to set override status for bind point component member.

✨ Head Position Update Complete
├─ Final Position: SIMD3<Float>(0.00087574124, -0.29077828, -0.9958763)
├─ Tracking State: running
├─ isPositioningInProgress: true
└─ isPositioningComplete: false

✨ Positioning Complete
├─ Phase: intro
├─ ImmersiveSpaceState: open
├─ Root Entity: IntroRoot
└─ Environment Ready: Root

// second failed viewing

🔄 === PHASE TRANSITION START ===
├─ From: outro
├─ To: intro
├─ Current Tracking State: stopped
├─ Has Hand Tracking: false
└─ Will Need Hand Tracking: true
🔄 Phase transition: outro -> intro
🔍 isTransitioning: false
🔍 immersiveSpaceState: open

=== Preparing ADC for intro and playing ===
🎯 Loading ADC template...
AssetLoadingManager: loadAsset(withName: adc, category: adc)
✅ ADC entity loaded, applying colors...

🎯 Setting up ADC Template
- Template entity: Root
- Antibody Color: 2
- Linker Color: 1
- Payload Color: 2
ITR..updateShaderGraphColor(): ✅ Successfully updated Basecolor_Tint with color: UIExtendedSRGBColorSpace 1 0.81 0.233 1
✅ Applied antibody color: 2
ITR..updatePBRDiffuseColor(): ❌ materials array is empty
ITR..updateShaderGraphColor(): ✅ Successfully updated Basecolor_Tint with color: UIExtendedSRGBColorSpace 0 0.584 1 1
✅ Applied linker color 1 to linker01_offset
ITR..updatePBRDiffuseColor(): ❌ materials array is empty
ITR..updateShaderGraphColor(): ✅ Successfully updated Basecolor_Tint with color: UIExtendedSRGBColorSpace 0 0.584 1 1
✅ Applied linker color 1 to linker02_offset
ITR..updatePBRDiffuseColor(): ❌ materials array is empty
ITR..updateShaderGraphColor(): ✅ Successfully updated Basecolor_Tint with color: UIExtendedSRGBColorSpace 0 0.584 1 1
✅ Applied linker color 1 to linker03_offset
ITR..updatePBRDiffuseColor(): ❌ materials array is empty
ITR..updateShaderGraphColor(): ✅ Successfully updated Basecolor_Tint with color: UIExtendedSRGBColorSpace 0 0.584 1 1
✅ Applied linker color 1 to linker04_offset
ITR..updatePBREmissiveColor(): ✅ Updated emissiveColor to: kCGColorSpaceModelRGB 1 1 0.387865 1
ITR..updateShaderGraphColor(): ✅ Successfully updated glowColor with color: UIExtendedSRGBColorSpace 1 0.81 0.233 1
✅ Applied payload color 2 to linker01_offset
ITR..updatePBREmissiveColor(): ✅ Updated emissiveColor to: kCGColorSpaceModelRGB 1 1 0.387865 1
ITR..updateShaderGraphColor(): ✅ Successfully updated glowColor with color: UIExtendedSRGBColorSpace 1 0.81 0.233 1
✅ Applied payload color 2 to linker02_offset
ITR..updatePBREmissiveColor(): ✅ Updated emissiveColor to: kCGColorSpaceModelRGB 1 1 0.387865 1
ITR..updateShaderGraphColor(): ✅ Successfully updated glowColor with color: UIExtendedSRGBColorSpace 1 0.81 0.233 1
✅ Applied payload color 2 to linker03_offset
ITR..updatePBREmissiveColor(): ✅ Updated emissiveColor to: kCGColorSpaceModelRGB 1 1 0.387865 1
ITR..updateShaderGraphColor(): ✅ Successfully updated glowColor with color: UIExtendedSRGBColorSpace 1 0.81 0.233 1
✅ Applied payload color 2 to linker04_offset
✅ ADC template stored in gameState
✅ ADC template configured with colors
✅ ADC template passed to lab state

=== Starting OutroViewModel Cleanup ===
✅ Completed OutroViewModel cleanup


=== Starting Outro Environment Cleanup ===
📊 Current template cache size: 9 entities
📊 Current templates: cancer_cell, attack_cancer_environment, outro_environment, assembled_lab, antibody_scene, PressStart_VO, adc, game_start_vo, test_fire_cell

✅ Completed outro environment cleanup


=== Tracking State [Start Tracking Request] ===
├─ Tracking Enabled: false
├─ Hand Tracking Enabled: true
└─ Current Provider State: running
ar_world_tracking_provider_query_device_anchor_at_timestamp <0x302eb5220>: The device_anchor can only be queried when the world tracking provider is running.
⚠️ No device anchor available

🌐 Provider States
├─ World Provider: stopped
├─ Hand Provider: stopped
└─ Stopped with Error: false

🖐️ Configuring Tracking Session
├─ World Tracking: Enabled
├─ Hand Tracking: Enabled
├─ Provider State: running
└─ Previous Tracking: Inactive
I am in the outro space in the onDisappear else block and think that I have been dismissed
🧹 Cleaning up app state

=== Cleaning Up App State ===
├─ Current Phase: intro
├─ Immersive Space: open
└─ Tracking Active: initialized
🛑 Stopping Tracking Session

=== Tracking State [Post-Stop] ===
├─ Tracking Enabled: false
├─ Hand Tracking Enabled: true
└─ Current Provider State: running
ar_world_tracking_provider_query_device_anchor_at_timestamp <0x302ef7200>: The device_anchor can only be queried when the world tracking provider is running.
ARRemoteService: remote object proxy failed with error: Error Domain=NSCocoaErrorDomain Code=4099 "The connection to service named com.apple.arkit.service.session was invalidated from this process." UserInfo={NSDebugDescription=The connection to service named com.apple.arkit.service.session was invalidated from this process.}
⚠️ No device anchor available
ARRemoteService: weak self released before invalidation

🌐 Provider States
├─ World Provider: stopped
├─ Hand Provider: stopped
└─ Stopped with Error: false
🔍 Provider State Verification
├─ Expected State: Stopped
├─ World Provider: ✅ [stopped]
├─ Hand Tracking Needed: true
└─ Hand Provider: ✅ [stopped]
❌ Failed to start tracking: CancellationError()

❌ Tracking start failed (Attempt 1/3)
├─ Error: failedToStart
├─ Phase: intro
└─ Provider State: stopped

❌ Tracking start failed (Attempt 2/3)
├─ Error: CancellationError()
├─ Phase: intro
└─ Provider State: stopped
cannot add handler to 0 from 1 - dropping

❌ Tracking start failed (Attempt 3/3)
├─ Error: CancellationError()
├─ Phase: intro
└─ Provider State: stopped
❌ All tracking start attempts failed
❌ Failed to start tracking after 3 attempts
✅ Phase transition completed: intro
ARPredictorRemoteService <0x149504c00>: Query queue is not running.
ARPredictorRemoteService <0x1494c3db0>: Query queue is not running.
🧹 **onChange Function**: Immersive space dismissed successfully.
🎯 Managing windows for phase: intro
📊 Before state update - nav window open: false
📊 Window states after update:
  Main: true
  Debug: false
  Library: false
  Builder: false
  Phases:
    AppPhase: intro
    ScenePhase: active
    LoadingPhase: completed
=== Finished Dismiss Attempt ===
🎯 PositioningSystem 5979B2BB-99EB-4135-B38A-7E1ACBC81E90 initializing...
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context
Initializing hosting entity without a context

=== IntroView Appeared ===
openImmersiveSpace result for intro: opened
cannot add handler to 0 from 1 - dropping

=== Processing Hand Updates ===
├─ Should Process Hand Tracking: true
└─ Hand Provider State: stopped
🖐️ Starting hand tracking updates

=== Setting up IntroView ===

=== hasBuiltSDC = true ===
🔄 Starting new intro session: tracking states reset
📱 IntroViewModel: Setting up root

✅ Root Setup Complete
├─ Root Entity: IntroRoot
├─ Position: SIMD3<Float>(0.0, -1.5, -1.0)
└─ Positioning: Ready for explicit updates
✅ Added root to content
📱 IntroView: Starting environment setup
📱 IntroViewModel: Starting environment setup
📱 IntroViewModel: Attempting to load intro environment
AssetLoadingManager: loadAsset(withName: intro_environment, category: introEnvironment)

=== App State Cleanup Complete ===
├─ Immersive Space: closed
└─ Tracking State: stopped
✅ IntroViewModel: Successfully loaded intro environment
✅ Environment setup complete
📱 IntroViewModel: Setting up individual entities
🔍 Found skyDome: SkySphere
✅ Set skyDome opacity to 0
📱 IntroViewModel: Starting portal setup
📱 Starting lab environment assembly
✅ Using cached assembled lab
✅ IntroViewModel: Successfully loaded assembled laboratory environment
✅ IntroViewModel: Created portal
✅ IntroViewModel: Portal setup complete
✅ IntroViewModel: Environment setup complete
✅ Environment setup complete
📱 IntroView: Found SwiftUI attachments
🎯 Found ADCBuilderAttachment target
🎯 Found AttackCancerAttachment target
Cannot find a BindPoint for any bind path: "", "", "", "", ""

=== Start Button Pressed ===
Current Phase: intro
isReadyForInteraction: true
Setting shouldUpdateHeadPosition = true
ar_world_tracking_provider_query_device_anchor_at_timestamp <0x302ef7200>: The device_anchor can only be queried when the world tracking provider is running.

🎯 Head Position Update Triggered
├─ shouldUpdate: true
├─ isReadyForHeadTracking: true
├─ isPositioningInProgress: false
├─ Current Phase: intro
├─ Tracking State: stopped
└─ Has Device Anchor: false

🎯 Starting Head Position Update
├─ Current Position: SIMD3<Float>(0.0, -1.5, -1.0)
├─ Tracking State: stopped
├─ isPositioningInProgress: false
└─ isPositioningComplete: false

✨ Head Position Update Complete
├─ Final Position: SIMD3<Float>(0.0, -1.5, -1.0)
├─ Tracking State: stopped
├─ isPositioningInProgress: true
└─ isPositioningComplete: false

✨ Positioning Complete
├─ Phase: intro
├─ ImmersiveSpaceState: closed
├─ Root Entity: IntroRoot
└─ Environment Ready: Root